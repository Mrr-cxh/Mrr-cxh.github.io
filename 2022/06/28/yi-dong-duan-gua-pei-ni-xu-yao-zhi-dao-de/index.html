<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="移动端适配你需要知道的, Mrr-cxh">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>移动端适配你需要知道的 | Mrr-cxh</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Mrr-cxh" type="application/atom+xml">
</head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Mrr-cxh</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Mrr-cxh</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/Mrr-cxh/Mrr-cxh.github.io" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/Mrr-cxh/Mrr-cxh.github.io" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/6.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">移动端适配你需要知道的</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/H5/">
                                <span class="chip bg-color">H5</span>
                            </a>
                        
                            <a href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D/">
                                <span class="chip bg-color">移动端适配</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E5%AD%A6%E4%B9%A0/" class="post-category">
                                学习
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2022-06-28
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2022-06-30
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    6.7k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    25 分
                </div>
                

                
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="移动端适配你需要知道的"><a class="markdownIt-Anchor" href="#移动端适配你需要知道的">#</a> 移动端适配你需要知道的</h2>
<h3 id="导读"><a class="markdownIt-Anchor" href="#导读">#</a> 导读</h3>
<p>移动端适配，是我们在开发中经常会遇到的，这里面可能会遇到非常多的问题：</p>
<ul>
<li><code>1px</code>  问题</li>
<li><code>UI</code>  图完美适配方案</li>
<li><code>iPhoneX</code>  适配方案</li>
<li>横屏适配</li>
<li>高清屏图片模糊问题</li>
<li>…</li>
</ul>
<p>上面这些问题可能我们在开发中已经知道如何解决，但是问题产生的原理，以及解决方案的原理可能会模糊不清。在解决这些问题的过程中，我们往往会遇到非常多的概念：像素、分辨率、 <code>PPI</code> 、  <code>DPI</code> 、  <code>DP</code> 、  <code>DIP</code> 、  <code>DPR</code> 、视口等等，你真的能分清这些概念的意义吗？<br>
本文将从移动端适配的基础概念出发，探究移动端适配各种问题的解决方案和实现原理。</p>
<h4 id="英寸"><a class="markdownIt-Anchor" href="#英寸">#</a> 英寸</h4>
<p>一般用英寸描述屏幕的物理大小，如电脑显示器的  <code>17</code> 、  <code>22</code> ，手机显示器的  <code>4.8</code> 、 <code>5.7</code>  等使用的单位都是英寸。</p>
<p>需要注意，上面的尺寸都是屏幕对角线的长度。一英寸就是指甲底部普通人拇指的宽度。英寸和厘米的换算： 1 英寸 = 2.54 厘米</p>
<h4 id="分辨率"><a class="markdownIt-Anchor" href="#分辨率">#</a> 分辨率</h4>
<p>通常我们所说的分辨率有两种，屏幕分辨率和图像分辨率。</p>
<h5 id="像素"><a class="markdownIt-Anchor" href="#像素">#</a> 像素</h5>
<p>像素即一个小方块，它具有特定的位置和颜色。图片、电子屏幕（手机、电脑）就是由无数个具有特定颜色和特定位置的小方块拼接而成。像素可以作为图片或电子屏幕的最小组成单位。</p>
<h5 id="屏幕分辨率"><a class="markdownIt-Anchor" href="#屏幕分辨率">#</a> 屏幕分辨率</h5>
<p>屏幕分辨率指一个屏幕具体由多少个像素点组成。<br>
<img src="https://ask.qcloudimg.com/http-save/6430202/cwihggpveo.jpeg?imageView2/2/w/1620"><br>
 <code>iPhone XSMax</code>  和  <code>iPhone SE</code>  的分辨率分别为  <code>2688x1242</code>  和  <code>1136x640</code> 。这表示手机分别在垂直和水平上所具有的像素点数。</p>
<p>当然分辨率高不代表屏幕就清晰，屏幕的清晰程度还与尺寸有关。</p>
<h5 id="图像分辨率"><a class="markdownIt-Anchor" href="#图像分辨率">#</a> 图像分辨率</h5>
<p>我们通常说的  <code>图片分辨率</code> 其实是指图片含有的  <code>像素数</code> ，比如一张图片的分辨率为  <code>800x400</code> 。这表示图片分别在垂直和水平上所具有的像素点数为  <code>800</code>  和  <code>400</code> 。</p>
<p>同一尺寸的图片，分辨率越高，图片越清晰。<br>
<img src="https://ask.qcloudimg.com/http-save/6430202/5dkv8ig1pk.png?imageView2/2/w/1620"></p>
<h5 id="ppi每英寸包括的像素数"><a class="markdownIt-Anchor" href="#ppi每英寸包括的像素数">#</a> PPI (每英寸包括的像素数)</h5>
<p><code>PPI</code>  可以用于描述屏幕的清晰度以及一张图片的质量。</p>
<p>使用  <code>PPI</code>  描述图片时，  <code>PPI</code>  越高，图片质量越高，使用  <code>PPI</code>  描述屏幕时，  <code>PPI</code>  越高，屏幕越清晰。<br>
在上面描述手机分辨率的图片中，我们可以看到：  <code>iPhone XSMax</code>  和  <code>iPhone SE</code>  的  <code>PPI</code>  分别为  <code>458</code>  和  <code>326</code> ，这足以证明前者的屏幕更清晰。<br>
由于手机尺寸为手机对角线的长度，我们通常使用如下的方法计算  <code>PPI</code> :<br>
 公式表达为  <code>PPI=√（X^2+Y^2）/ Z</code>  （X：长度像素数；Y：宽度像素数；Z：屏幕大小）</p>
<h5 id="dpi每英寸包括的点数"><a class="markdownIt-Anchor" href="#dpi每英寸包括的点数">#</a> DPI (每英寸包括的点数)</h5>
<p>这里的点是一个抽象的单位，它可以是屏幕像素点、图片像素点也可以是打印机的墨点。<br>
平时你可能会看到使用  <code>DPI</code>  来描述图片和屏幕，这时的  <code>DPI</code>  应该和  <code>PPI</code>  是等价的，  <code>DPI</code>  最常用的是用于描述打印机，表示打印机每英寸可以打印的点数。<br>
一张图片在屏幕上显示时，它的像素点数是规则排列的，每个像素点都有特定的位置和颜色。<br>
当使用打印机进行打印时，打印机可能不会规则的将这些点打印出来，而是使用一个个打印点来呈现这张图像，这些打印点之间会有一定的空隙，这就是  <code>DPI</code>  所描述的：打印点的密度。<br>
<img src="https://ask.qcloudimg.com/http-save/6430202/mqxgs8duhq.jpeg?imageView2/2/w/1620"><br>
所以，打印机的  <code>DPI</code>  越高，打印图像的精细程度就越高，同时这也会消耗更多的墨点和时间。</p>
<h4 id="设备独立像素逻辑像素"><a class="markdownIt-Anchor" href="#设备独立像素逻辑像素">#</a> 设备独立像素 (逻辑像素)</h4>
<p>实际上，上面我们描述的像素都是  <code>物理像素</code> ，即设备上真实的物理单元。<br>
下面我们来看看  <code>设备独立像素</code> 究竟是如何产生的：<br>
智能手机发展非常之快，在几年之前，我们还用着分辨率非常低的手机，比如下面左侧的白色手机，它的分辨率是  <code>320x480</code> ，我们可以在上面浏览正常的文字、图片等等。但是，随着科技的发展，低分辨率的手机已经不能满足我们的需求了。很快，更高分辨率的屏幕诞生了，比如下面的黑色手机，它的分辨率是  <code>640x940</code> ，正好是白色手机的两倍。<br>
理论上来讲，在白色手机上相同大小的图片和文字，在黑色手机上会被缩放一倍，因为它的分辨率提高了一倍。这样，岂不是后面出现更高分辨率的手机，页面元素会变得越来越小吗？<br>
<img src="https://ask.qcloudimg.com/http-save/6430202/zgcblxjm6q.jpeg?imageView2/2/w/1620"><br>
然而，事实并不是这样的，我们现在使用的智能手机，不管分辨率多高，他们所展示的界面比例都是基本类似的。乔布斯在  <code>iPhone4</code>  的发布会上首次提出了  <code>RetinaDisplay</code>  (视网膜屏幕) 的概念，它正是解决了上面的问题，这也使它成为一款跨时代的手机。<br>
在  <code>iPhone4</code>  使用的视网膜屏幕中，把  <code>2x2</code>  个像素当  <code>1</code>  个像素使用，这样让屏幕看起来更精致，但是元素的大小却不会改变。<br>
<img src="https://ask.qcloudimg.com/http-save/6430202/js8gvee4b2.jpeg?imageView2/2/w/1620"><br>
如果黑色手机使用了视网膜屏幕的技术，那么显示结果应该是下面的情况，比如列表的宽度为  <code>300</code>  个像素，那么在一条水平线上，白色手机会用  <code>300</code>  个物理像素去渲染它，而黑色手机实际上会用  <code>600</code>  个物理像素去渲染它。<br>
<img src="https://ask.qcloudimg.com/http-save/6430202/91kfnlu32k.jpeg?imageView2/2/w/1620"><br>
我们必须用一种单位来同时告诉不同分辨率的手机，它们在界面上显示元素的大小是多少，这个单位就是设备独立像素 ( <code>DeviceIndependentPixels</code> ) 简称  <code>DIP</code>  或  <code>DP</code> 。上面我们说，列表的宽度为  <code>300</code>  个像素，实际上我们可以说：列表的宽度为  <code>300</code>  个设备独立像素。<br>
打开  <code>chrome</code>  的 <code>开发者工具</code> ，我们可以模拟各个手机型号的显示情况，每种型号上面会显示一个尺寸，比如  <code>iPhone X</code>  显示的尺寸是  <code>375x812</code> ，实际  <code>iPhone X</code>  的分辨率会比这高很多，这里显示的就是 <code>设备独立像素</code> 。可以通过 <code>window.innerWidth</code>  获取它的宽度<br>
<img src="https://ask.qcloudimg.com/http-save/6430202/usun7mbs1b.jpeg?imageView2/2/w/1620"></p>
<h5 id="设备像素比dpr"><a class="markdownIt-Anchor" href="#设备像素比dpr">#</a> 设备像素比 (dpr)</h5>
<p>在  <code>web</code>  中，浏览器为我们提供了  <code>window.devicePixelRatio</code>  来帮助我们获取  <code>dpr</code> 。</p>
<p>在  <code>css</code>  中，可以使用媒体查询  <code>min-device-pixel-ratio</code> ，区分  <code>dpr</code></p>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">-webkit-min-device-pixel-ratio</span><span class="token punctuation">:</span> 2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token property">min-device-pixel-ratio</span><span class="token punctuation">:</span> 2<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>在  <code>ReactNative</code>  中，我们也可以使用  <code>PixelRatio.get()</code>  来获取  <code>DPR</code> 。</p>
<p>当然，上面的规则也有例外，  <code>iPhone6、7、8Plus</code>  的实际物理像素是  <code>1080x1920</code> ，在开发者工具中我们可以看到：它的设备独立像素是  <code>414x736</code> ，设备像素比为  <code>3</code> ，设备独立像素和设备像素比的乘积并不等于  <code>1080x1920</code> ，而是等于  <code>1242x2208</code> 。</p>
<p>实际上，手机会自动把  <code>1242x2208</code>  个像素点塞进  <code>1080*1920</code>  个物理像素点来渲染，我们不用关心这个过程，而  <code>1242x2208</code>  被称为屏幕的 设计像素。我们 <code>开发过程中</code> 也是以这个 <code>设计像素</code> 为准。</p>
<p>实际上，从苹果提出视网膜屏幕开始，才出现设备像素比这个概念，因为在这之前，移动设备都是直接使用物理像素来进行展示。</p>
<p>紧接着，  <code>Android</code>  同样使用了其他的技术方案来实现  <code>DPR</code>  大于 <code>1</code>  的屏幕，不过原理是类似的。由于  <code>Android</code>  屏幕尺寸非常多、分辨率高低跨度非常大，不像苹果只有它自己的几款固定设备、尺寸。所以，为了保证各种设备的显示效果，  <code>Android</code>  按照设备的像素密度将设备分成了几个区间：<br>
<img src="https://ask.qcloudimg.com/http-save/6430202/140nniez73.jpeg?imageView2/2/w/1620"></p>
<p>当然，所有的  <code>Android</code>  设备不一定严格按照上面的分辨率，每个类型可能对应几种不同分辨率，所以，每个  <code>Android</code>  手机都能根据给定的区间范围，确定自己的  <code>DPR</code> ，从而拥有类似的显示。当然，仅仅是类似，由于各个设备的尺寸、分辨率上的差异，设备独立像素也不会完全相等，所以各种  <code>Android</code>  设备仍然不能做到在展示上完全相等</p>
<h5 id="移动端开发"><a class="markdownIt-Anchor" href="#移动端开发">#</a> 移动端开发</h5>
<p>在  <code>iOS</code> 、  <code>Android</code>  和  <code>ReactNative</code>  开发中样式单位其实都使用的是设备独立像素。</p>
<p><code>iOS</code>  的尺寸单位为  <code>pt</code> ，  <code>Android</code>  的尺寸单位为  <code>dp</code> ，  <code>ReactNative</code>  中没有指定明确的单位，它们其实都是设备独立像素  <code>dp</code> 。</p>
<p>在使用  <code>ReactNative</code>  开发  <code>App</code>  时，  <code>UI</code>  给我们的原型图一般是基于  <code>iphone6</code>  的像素给定的。为了适配所有机型，我们在写样式时需要把物理像素转换为设备独立像素：例如：如果给定一个元素的高度为  <code>200px</code>  (这里的  <code>px</code>  指物理像素，非  <code>CSS</code>  像素)，  <code>iphone6</code>  的设备像素比为  <code>2</code> ，我们给定的  <code>height</code>  应为  <code>200px/2=100dp</code> 。<br>
当然，最好的是，你可以和设计沟通好，所有的  <code>UI</code>  图都按照设备独立像素来出。</p>
<p>我们还可以在代码 (  <code>ReactNative</code> ) 中进行  <code>px</code>  和  <code>dp</code>  的转换：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> PixelRatio <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-native"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> dpr <span class="token operator">=</span> PixelRatio<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/** * px转换为dp */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">pxConvertTodp</span><span class="token punctuation">(</span><span class="token parameter">px</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> px <span class="token operator">/</span> dpr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/** * dp转换为px */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">dpConvertTopx</span><span class="token punctuation">(</span><span class="token parameter">dp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> PixelRatio<span class="token punctuation">.</span><span class="token function">getPixelSizeForLayoutSize</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="web-端开发"><a class="markdownIt-Anchor" href="#web-端开发">#</a> WEB 端开发</h5>
<p>在写  <code>CSS</code>  时，我们用到最多的单位是  <code>px</code> ，即  <code>CSS像素</code> ，当页面缩放比例为  <code>100%</code>  时，一个  <code>CSS像素</code> 等于一个 <code>设备独立像素</code> 。</p>
<p>但是  <code>CSS像素</code> 是很容易被改变的，当用户对浏览器进行了放大，  <code>CSS像素</code> 会被放大，这时一个  <code>CSS像素</code> 会跨越更多的物理像素。</p>
<p><code>页面的缩放系数=CSS像素/设备独立像素</code></p>
<h4 id="视口"><a class="markdownIt-Anchor" href="#视口">#</a> 视口</h4>
<p>视口 ( <code>viewport</code> ) 代表当前可见的计算机图形区域。在 <code>Web</code>  浏览器术语中，通常与浏览器窗口相同，但不包括浏览器的  <code>UI</code> ，  <code>菜单栏等</code>  —— 即 <code>指的是你正在浏览的文档的那一部分</code> 。</p>
<p>一般我们所说的视口共包括三种：布局视口、视觉视口和理想视口，它们在屏幕适配中起着非常重要的作用。</p>
<h5 id="布局视口"><a class="markdownIt-Anchor" href="#布局视口">#</a> 布局视口</h5>
<img src="https://ask.qcloudimg.com/http-save/6430202/cydcgjulws.jpeg?imageView2/2/w/1620">
布局视口(`layout viewport`)：当我们以百分比来指定一个元素的大小时，它的计算值是由这个元素的包含块计算而来的。当这个元素是最顶级的元素时，它就是基于布局视口来计算的。
<p>所以，布局视口是网页布局的基准窗口，在  <code>PC</code>  浏览器上，布局视口就等于当前浏览器的窗口大小（不包括  <code>borders</code>  、  <code>margins</code> 、 <code>滚动条</code> ）。</p>
<p>在移动端，布局视口被赋予一个默认值，大部分为  <code>980px</code> ，这保证  <code>PC</code>  的网页可以在手机浏览器上呈现，但是非常小，用户可以手动对网页进行放大。</p>
<p>我们可以通过调用  <code>document.documentElement.clientWidth/clientHeight</code>  来获取布局视口大小。</p>
<h5 id="视觉视口"><a class="markdownIt-Anchor" href="#视觉视口">#</a> 视觉视口</h5>
<img src="https://ask.qcloudimg.com/http-save/6430202/7u01zr7ucb.jpeg?imageView2/2/w/1620">
<p>视觉视口 ( <code>visual viewport</code> )：用户通过屏幕真实看到的区域。</p>
<p>视觉视口默认等于当前浏览器的窗口大小（ <code>包括滚动条宽度</code> ）。</p>
<p><code>当用户对浏览器进行缩放时，不会改变布局视口的大小，所以页面布局是不变的，但是缩放会改变视觉视口的大小</code> 。</p>
<p>例如：用户将浏览器窗口放大了 <code>200%</code> ，这时浏览器窗口中的 <code>CSS像素</code> 会随着视觉视口的放大而放大，这时一个 <code>CSS像素</code> 会跨越更多的物理像素。</p>
<p>所以，布局视口会限制你的 <code>CSS</code>  布局而视觉视口决定用户具体能看到什么。</p>
<p>我们可以通过调用 <code>window.innerWidth/innerHeight</code>  来获取视觉视口大小。</p>
<h5 id="理想视口"><a class="markdownIt-Anchor" href="#理想视口">#</a> 理想视口</h5>
<p>理想视口 ( <code>ideal viewport</code> )：网站页面在移动端展示的理想大小。</p>
<p>如上图，我们在描述设备独立像素时曾使用过这张图，在浏览器调试移动端时页面上给定的像素大小就是理想视口大小，它的单位正是设备独立像素。</p>
<p>上面在介绍  <code>CSS 像素</code> 时曾经提到  <code>页面的缩放系数=CSS 像素/设备独立像素</code> ，实际上说  <code>页面的缩放系数=理想视口宽度/视觉视口宽度更为准确</code> 。</p>
<p>所以，当页面缩放比例为 <code>100%</code>  时，  <code>CSS 像素=设备独立像素</code> ，  <code>理想视口=视觉视口</code> 。</p>
<p>我们可以通过调用  <code>screen.width/height</code>  来获取理想视口大小。</p>
<h5 id="meta-viewport"><a class="markdownIt-Anchor" href="#meta-viewport">#</a> Meta viewport</h5>
<p><code>&lt;meta&gt;</code>  元素表示那些不能由其它 <code>HTML</code>  元相关元素之一表示的任何元数据信息，它可以告诉浏览器如何解析页面。</p>
<p>我们可以借助 <code>&lt;meta&gt;</code>  元素的 <code>viewport</code>  来帮助我们设置视口、缩放等，从而让移动端得到更好的展示效果。</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span>
  <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span>
  <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width; initial-scale=1; maximum-scale=1; minimum-scale=1; user-scalable=no;<span class="token punctuation">"</span></span>
<span class="token punctuation">/&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>width</code>  正整数或  <code>device-width</code>  以 pixels（像素）为单位， 定义布局视口的宽度。<br>
 <code>height</code>  正整数或  <code>device-height</code>  以 pixels（像素）为单位， 定义布局视口的高度。<br>
 <code>initial-scale</code> :0.0-10.0 定义页面初始缩放比率。<br>
 <code>minimum-scale</code> :0.0-10.0 定义缩放的最小值；必须小于或等  <code>maximum-scale</code>  的值。<br>
 <code>maximum-scale</code> :0.0-10.0 定义缩放的最大值；必须大于或等于  <code>minimum-scale</code>  的值。<br>
 <code>user-scalable</code>  一个布尔值（ yes 或者 no），如果设置为 no，用户将不能放大或缩小网页。默认值为 yes。</p>
<h5 id="移动端适配"><a class="markdownIt-Anchor" href="#移动端适配">#</a> 移动端适配</h5>
<p>为了在移动端让页面获得更好的显示效果，我们必须让布局视口、视觉视口都尽可能等于理想视口<br>
 <code>device-width</code>  就等于理想视口的宽度，所以设置 <code>width=device-width</code>  就相当于让布局视口等于理想视口。</p>
<p>由于  <code>initial-scale=理想视口宽度/视觉视口宽度</code> ，所以我们设置  <code>initial-scale=1</code> ; 就相当于让视觉视口等于理想视口。</p>
<p>这时，1 个  <code>CSS 像素</code> 就等于 1 个设备独立像素，而且我们也是基于理想视口来进行布局的，所以呈现出来的页面布局在各种设备上都能大致相似。</p>
<h5 id="缩放"><a class="markdownIt-Anchor" href="#缩放">#</a> 缩放</h5>
<p>上面提到 <code>width</code>  可以决定布局视口的宽度，实际上它并不是布局视口的唯一决定性因素，设置 <code>initial-scale</code>  也有肯能影响到布局视口，因为布局视口宽度取的是  <code>width</code>  和视觉视口宽度的最大值。</p>
<p>例如：若手机的理想视口宽度为  <code>400px</code> ，设置  <code>width=device-width</code> ，  <code>initial-scale=2</code> ，此时  <code>视觉视口宽度=理想视口宽度/initial-scale</code>  即  <code>200px</code> ，布局视口取两者最大值即  <code>device-width 400px</code> 。</p>
<p>若设置  <code>width=device-width</code> ，  <code>initial-scale=0.5</code> ，此时  <code>视觉视口宽度=理想视口宽度/initial-scale</code>  即  <code>800px</code> ，布局视口取两者最大值即  <code>800px</code></p>
<h5 id="获取浏览器大小"><a class="markdownIt-Anchor" href="#获取浏览器大小">#</a> 获取浏览器大小</h5>
<img src="https://ask.qcloudimg.com/http-save/6430202/1u30droj4m.jpeg?imageView2/2/w/1620">
<ul>
<li>window.innerHeight：获取浏览器视觉视口高度（包括垂直滚动条）。</li>
<li>window.outerHeight：获取浏览器窗口外部的高度。表示整个浏览器窗口的高度，包括侧边栏、窗口镶边和调正窗口大小的边框。</li>
<li>window.screen.Height：获取获屏幕取理想视口高度，这个数值是固定的</li>
<li>window.screen.availHeight：浏览器窗口可用的高度。</li>
<li>document.documentElement.clientHeight：获取浏览器布局视口高度，包括内边距，但不包括垂直滚动条、边框和外边距。</li>
<li>document.documentElement.offsetHeight：包括内边距、滚动条、边框和外边距。</li>
<li>document.documentElement.scrollHeight：在不使用滚动条的情况下适合视口中的所有内容所需的最小宽度。测量方式与  <code>clientHeight</code>  相同：它包含元素的内边距，但不包括边框，外边距或垂直滚动条</li>
</ul>
<h4 id="1px-问题"><a class="markdownIt-Anchor" href="#1px-问题">#</a> 1px 问题</h4>
<p>为了适配各种屏幕，我们写代码时一般使用设备独立像素来对页面进行布局。</p>
<p>而在设备像素比大于 <code>1</code>  的屏幕上，我们写的 <code>1px</code>  实际上是被多个物理像素渲染，这就会出现 1px 在有些屏幕上看起来很粗的现象。</p>
<h5 id="border-image"><a class="markdownIt-Anchor" href="#border-image">#</a> border-image</h5>
<p>基于  <code>media</code>  查询判断不同的设备像素比给定不同的  <code>border-image</code></p>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.border_1px</span> <span class="token punctuation">{</span>
  <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #000<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">-webkit-min-device-pixel-ratio</span><span class="token punctuation">:</span> 2<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">.border_1px</span> <span class="token punctuation">{</span>
    <span class="token property">border-bottom</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token property">border-width</span><span class="token punctuation">:</span> 0 0 1px 0<span class="token punctuation">;</span>
    <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../img/1pxline.png<span class="token punctuation">)</span></span> 0 0 2 0 stretch<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="background-image"><a class="markdownIt-Anchor" href="#background-image">#</a> background-image</h5>
<p>和  <code>border-image</code>  类似，准备一张符合条件的边框背景图，模拟在背景上。</p>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.border_1px</span> <span class="token punctuation">{</span>
  <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #000<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">-webkit-min-device-pixel-ratio</span><span class="token punctuation">:</span> 2<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">.border_1px</span> <span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../img/1pxline.png<span class="token punctuation">)</span></span> repeat-x left bottom<span class="token punctuation">;</span>
    <span class="token property">background-size</span><span class="token punctuation">:</span> 100% 1px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>上面两种都需要单独准备图片，而且圆角不是很好处理，但是可以应对大部分场景。</p>
<h5 id="伪类-transform"><a class="markdownIt-Anchor" href="#伪类-transform">#</a> 伪类 + transform</h5>
<p>基于  <code>media</code>  查询判断不同的设备像素比对线条进行缩放：</p>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.border_1px:before</span> <span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
  <span class="token property">transform-origin</span><span class="token punctuation">:</span> 50% 0%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">-webkit-min-device-pixel-ratio</span><span class="token punctuation">:</span> 2<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">.border_1px:before</span> <span class="token punctuation">{</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleY</span><span class="token punctuation">(</span>0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">-webkit-min-device-pixel-ratio</span><span class="token punctuation">:</span> 3<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">.border_1px:before</span> <span class="token punctuation">{</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleY</span><span class="token punctuation">(</span>0.33<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这种方式可以满足各种场景，如果需要满足圆角，只需要给伪类也加上  <code>border-radius</code>  即可。</p>
<h5 id="svg"><a class="markdownIt-Anchor" href="#svg">#</a> svg</h5>
<p>上面我们  <code>border-image</code>  和  <code>background-image</code>  都可以模拟  <code>1px</code>  边框，但是使用的都是位图，还需要外部引入。</p>
<p>借助  <code>PostCSS</code>  的  <code>postcss-write-svg</code>  我们能直接使用  <code>border-image</code>  和  <code>background-image</code>  创建  <code>svg</code>  的  <code>1px</code>  边框：</p>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token atrule"><span class="token rule">@svg</span> border_1px</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
  <span class="token atrule"><span class="token rule">@rect</span></span> <span class="token punctuation">{</span>
    <span class="token property">fill</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--color<span class="token punctuation">,</span> black<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.example</span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid transparent<span class="token punctuation">;</span>
  <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token function">svg</span><span class="token punctuation">(</span>border_1px <span class="token function">param</span><span class="token punctuation">(</span>--color #00b1ff<span class="token punctuation">)</span><span class="token punctuation">)</span> 2 2 stretch<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>编译后的</p>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.example</span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid transparent<span class="token punctuation">;</span>
  <span class="token property">border-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' height='2px'%3E%3Crect fill='%2300b1ff' width='100%25' height='50%25'/%3E%3C/svg%3E"</span><span class="token punctuation">)</span></span>
    2 2 stretch<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="设置-viewport"><a class="markdownIt-Anchor" href="#设置-viewport">#</a> 设置 viewport</h5>
<p>通过设置缩放，让  <code>CSS像素</code> 等于真正的物理像素。</p>
<p>例如：当设备像素比为  <code>3</code>  时，我们将页面缩放  <code>1/3</code>  倍，这时  <code>1px</code>  等于一个真正的屏幕像素。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> scale <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> window<span class="token punctuation">.</span>devicePixelRatio<span class="token punctuation">;</span>
<span class="token keyword">const</span> viewport <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'meta[name="viewport"]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>viewport<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  viewport <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"meta"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  viewport<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"viewport"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  window<span class="token punctuation">.</span>document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>viewport<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
viewport<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>
  <span class="token string">"content"</span><span class="token punctuation">,</span>
  <span class="token string">"width=device-width,user-scalable=no,initial-scale="</span> <span class="token operator">+</span>
    scale <span class="token operator">+</span>
    <span class="token string">",maximum-scale="</span> <span class="token operator">+</span>
    scale <span class="token operator">+</span>
    <span class="token string">",minimum-scale="</span> <span class="token operator">+</span>
    scale
<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>实际上，上面这种方案是早先  <code>flexible</code>  采用的方案。</p>
<p>当然，这样做是要付出代价的，这意味着你页面上所有的布局都要按照物理像素来写。这显然是不现实的，这时，我们可以借助  <code>flexible</code>  或  <code>vw、vh</code>  来帮助我们进行适配。</p>
<h4 id="移动端适配方案"><a class="markdownIt-Anchor" href="#移动端适配方案">#</a> 移动端适配方案</h4>
<p>尽管我们可以使用设备独立像素来保证各个设备在不同手机上显示的效果类似，但这并不能保证它们显示完全一致，我们需要一种方案来让设计稿得到更完美的适配。</p>
<h5 id="flexible-方案"><a class="markdownIt-Anchor" href="#flexible-方案">#</a> flexible 方案</h5>
<p><code>flexible</code>  方案是阿里早期开源的一个移动端适配解决方案，引用  <code>flexible</code>  后，我们在页面上统一使用  <code>rem</code>  来布局。<br>
它的核心代码非常简单：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">var</span> docEl <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>
<span class="token comment">// let 1rem = viewWidth / 10</span>
<span class="token keyword">function</span> <span class="token function">setRemUnit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> rem <span class="token operator">=</span> docEl<span class="token punctuation">.</span>clientWidth <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>
  docEl<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> rem <span class="token operator">+</span> <span class="token string">"px"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">setRemUnit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>rem</code>  是相对于 <code>html</code>  节点的  <code>font-size</code>  来做计算的。<br>
我们通过设置  <code>document.documentElement.style.fontSize</code>  就可以统一整个页面的布局标准。<br>
上面的代码中，将  <code>html</code>  节点的  <code>font-size</code>  设置为页面  <code>clientWidth</code>  (布局视口) 的  <code>1/10</code> ，即  <code>1rem</code>  就等于页面布局视口的  <code>1/10</code> ，这就意味着我们后面使用的  <code>rem</code>  都是按照页面比例来计算的。<br>
这时，我们只需要将  <code>UI</code>  出的图转换为  <code>rem</code>  即可。<br>
以  <code>iPhone6</code>  为例：布局视口为  <code>375px</code> ，则  <code>1rem=37.5px</code> ，这时  <code>UI</code>  给定一个元素的宽为  <code>75px</code> （设备独立像素），我们只需要将它设置为  <code>75/37.5=2rem</code> 。<br>
当然，每个布局都要计算非常繁琐，我们可以借助  <code>PostCSS</code>  的  <code>px2rem</code>  插件来帮助我们完成这个过程。</p>
<p>下面的代码可以保证在页面大小变化时，布局可以自适应，当触发了  <code>window</code>  的  <code>resize</code>  和  <code>pageShow</code>  事件之后自动调整  <code>html</code>  的  <code>fontSize</code>  大小。</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">//   reset rem unit on page resize</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"resize"</span><span class="token punctuation">,</span> setRemUnit<span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"pageshow"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>persisted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setRemUnit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>由于  <code>viewport</code>  单位得到众多浏览器的兼容，上面这种方案现在已经被官方弃用：<br>
lib-flexible 这个过渡方案已经可以放弃使用，不管是现在的版本还是以前的版本，都存有一定的问题。建议大家开始使用 viewport 来替代此方案。<br>
下面我们来看看现在最流行的  <code>vh、vw</code>  方案。</p>
<h5 id="vhvw-方案"><a class="markdownIt-Anchor" href="#vhvw-方案">#</a> vh,vw 方案</h5>
<p><code>vh、vw</code>  方案即将视觉视口宽度  <code>window.innerWidth</code>  和视觉视口高度  <code>window.innerHeight</code>  等分为 100 份。<br>
上面的  <code>flexible</code>  方案就是模仿这种方案，因为早些时候  <code>vw</code>  还没有得到很好的兼容。<br>
如果视觉视口为 <code> 375px</code> ，那么  <code>1vw=3.75px</code> ，这时  <code>UI</code>  给定一个元素的宽为  <code>75px</code> （设备独立像素），我们只需要将它设置为  <code>75/3.75=20vw</code> 。<br>
这里的比例关系我们也不用自己换算，我们可以使用  <code>PostCSS</code>  的  <code>postcss-px-to-viewport </code> 插件帮我们完成这个过程。写代码时，我们只需要根据  <code>UI</code>  给的设计图写  <code>px</code>  单位即可。<br>
当然，没有一种方案是十全十美的，  <code>vw</code>  同样有一定的缺陷：</p>
<ul>
<li><code>px</code>  转换成  <code>vw</code>  不一定能完全整除，因此有一定的像素差。</li>
<li>比如当容器使用  <code>vw</code> ，  <code>margin</code>  采用  <code>px</code>  时，很容易造成整体宽度超过  <code>100vw</code> ，从而影响布局效果。当然我们也是可以避免的，例如使用  <code>padding</code>  代替  <code>margin</code> ，结合  <code>calc()</code>  函数使用等等…</li>
</ul>
<h4 id="适配-iphonex"><a class="markdownIt-Anchor" href="#适配-iphonex">#</a> 适配 iPhoneX</h4>
<p><code>iPhoneX</code>  的出现将手机的颜值带上了一个新的高度，它取消了物理按键，改成了底部的小黑条，但是这样的改动给开发者适配移动端又增加了难度。</p>
<h5 id="安全区域"><a class="markdownIt-Anchor" href="#安全区域">#</a> 安全区域</h5>
<p>在  <code>iPhoneX</code>  发布后，许多厂商相继推出了具有边缘屏幕的手机。<br>
<img src="https://ask.qcloudimg.com/http-save/6430202/3pwuwbc86d.jpeg?imageView2/2/w/1620"><br>
这些手机和普通手机在外观上无外乎做了三个改动：圆角、刘海和小黑条。为了适配这些手机，安全区域这个概念变诞生了：安全区域就是一个不受上面三个效果的可视窗口范围。</p>
<p>为了保证页面的显示效果，我们必须把页面限制在安全范围内，但是不影响整体效果。</p>
<h5 id="viewport-fit"><a class="markdownIt-Anchor" href="#viewport-fit">#</a> viewport-fit</h5>
<p><code>viewport-fit</code>  是专门为了适配  <code>iPhoneX</code>  而诞生的一个属性，它用于限制网页如何在安全区域内进行展示。<br>
<img src="https://ask.qcloudimg.com/http-save/6430202/vr5m5drchy.jpeg?imageView2/2/w/1620"><br>
 <code>contain</code> : 可视窗口完全包含网页内容<br>
 <code>cover</code> ：网页内容完全覆盖可视窗口<br>
默认情况下或者设置为  <code>auto</code>  和  <code>contain</code>  效果相同。</p>
<h5 id="envconstant"><a class="markdownIt-Anchor" href="#envconstant">#</a> env,constant</h5>
<img src="https://ask.qcloudimg.com/http-save/6430202/4f6jfv8mvx.jpeg?imageView2/2/w/1620">
<p>我们需要将顶部和底部合理的摆放在安全区域内，  <code>iOS11</code>  新增了两个  <code>CSS</code>  函数  <code>env、constant</code> ，用于设定安全区域与边界的距离。</p>
<p>函数内部可以是四个常量：</p>
<ul>
<li>safe-area-inset-left：安全区域距离左边边界距离</li>
<li>safe-area-inset-right：安全区域距离右边边界距离</li>
<li>safe-area-inset-top：安全区域距离顶部边界距离</li>
<li>safe-area-inset-bottom：安全区域距离底部边界距离</li>
</ul>
<p>注意：我们必须指定  <code>viweport-fit</code>  后才能使用这两个函数：</p>
<pre class="line-numbers language-css" data-language="css"><code class="language-css">&lt;meta name=<span class="token string">"viewport"</span> content=<span class="token string">"viewport-fit=cover"</span>&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><code>constant</code>  在  <code>iOS&lt;11.2</code>  的版本中生效，  <code>env</code>  在  <code>iOS&gt;=11.2</code>  的版本中生效，这意味着我们往往要同时设置他们，将页面限制在安全区域内：</p>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> <span class="token function">constant</span><span class="token punctuation">(</span>safe-area-inset-bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> <span class="token function">env</span><span class="token punctuation">(</span>safe-area-inset-bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>当使用底部固定导航栏时，我们要为他们设置  <code>padding</code>  值：</p>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"> <span class="token punctuation">{</span>
  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> <span class="token function">constant</span><span class="token punctuation">(</span>safe-area-inset-bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> <span class="token function">env</span><span class="token punctuation">(</span>safe-area-inset-bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="横屏适配"><a class="markdownIt-Anchor" href="#横屏适配">#</a> 横屏适配</h4>
<h5 id="javascript-检测横屏"><a class="markdownIt-Anchor" href="#javascript-检测横屏">#</a> JavaScript 检测横屏</h5>
<p><code>window.orientation</code> : 获取屏幕旋转方向</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"resize"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>orientation <span class="token operator">===</span> <span class="token number">180</span> <span class="token operator">||</span> window<span class="token punctuation">.</span>orientation <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 正常方向或屏幕旋转180度</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"竖屏"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>orientation <span class="token operator">===</span> <span class="token number">90</span> <span class="token operator">||</span> window<span class="token punctuation">.</span>orientation <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 屏幕顺时钟旋转90度或屏幕逆时针旋转90度</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"横屏"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="css-检测横屏"><a class="markdownIt-Anchor" href="#css-检测横屏">#</a> CSS 检测横屏</h5>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token atrule"><span class="token rule">@media</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">orientation</span><span class="token punctuation">:</span> portrait<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token comment">/*竖屏...*/</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">orientation</span><span class="token punctuation">:</span> landscape<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token comment">/*横屏...*/</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="图片模糊问题"><a class="markdownIt-Anchor" href="#图片模糊问题">#</a> 图片模糊问题</h4>
<h5 id="产生原因"><a class="markdownIt-Anchor" href="#产生原因">#</a> 产生原因</h5>
<p>我们平时使用的图片大多数都属于位图（  <code>png、jpg...</code> ），位图由一个个像素点构成的，每个像素都具有特定的位置和颜色值：<br>
理论上，位图的每个像素对应在屏幕上使用一个物理像素来渲染，才能达到最佳的显示效果。</p>
<p>而在  <code>dpr&gt;1</code>  的屏幕上，位图的一个像素可能由多个物理像素来渲染，然而这些物理像素点并不能被准确的分配上对应位图像素的颜色，只能取近似值，所以相同的图片在  <code>dpr&gt;1</code>  的屏幕上就会模糊:<br>
<img src="https://ask.qcloudimg.com/http-save/6430202/z76hvze9e6.jpeg?imageView2/2/w/1620"></p>
<h5 id="解决方案"><a class="markdownIt-Anchor" href="#解决方案">#</a> 解决方案</h5>
<p>为了保证图片质量，我们应该尽可能让一个屏幕像素来渲染一个图片像素，所以，针对不同  <code>DPR</code>  的屏幕，我们需要展示不同分辨率的图片。</p>
<p>如：在  <code>dpr=2</code>  的屏幕上展示两倍图  <code>(@2x)</code> ，在  <code>dpr=3</code>  的屏幕上展示三倍图  <code>(@3x)</code></p>
<img src="https://ask.qcloudimg.com/http-save/6430202/yvfd3hdpg6.png?imageView2/2/w/1620">
<h5 id="media-查询"><a class="markdownIt-Anchor" href="#media-查询">#</a> media 查询</h5>
<p>使用  <code>media</code>  查询判断不同的设备像素比来显示不同精度的图片：</p>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.avatar</span> <span class="token punctuation">{</span>
  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>conardLi_1x.png<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">-webkit-min-device-pixel-ratio</span><span class="token punctuation">:</span> 2<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">.avatar</span> <span class="token punctuation">{</span>
    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>conardLi_2x.png<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> <span class="token keyword">only</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">-webkit-min-device-pixel-ratio</span><span class="token punctuation">:</span> 3<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">.avatar</span> <span class="token punctuation">{</span>
    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>conardLi_3x.png<span class="token punctuation">)</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>只适用于背景图</code></p>
<h5 id="image-set"><a class="markdownIt-Anchor" href="#image-set">#</a> image-set</h5>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.avatar</span> <span class="token punctuation">{</span>
  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">-webkit-image-set</span><span class="token punctuation">(</span>
    <span class="token string">"conardLi_1x.png"</span> 1x<span class="token punctuation">,</span>
    <span class="token string">"conardLi_2x.png"</span> 2x
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><code>只适用于背景图</code></p>
<h5 id="srcset"><a class="markdownIt-Anchor" href="#srcset">#</a> srcset</h5>
<p>使用  <code>img</code>  标签的  <code>srcset</code>  属性，浏览器会自动根据像素密度匹配最佳显示图片：</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>conardLi_1x.png<span class="token punctuation">"</span></span> <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>conardLi_2x.png 2x, conardLi_3x.png 3x<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h5 id="javascript-拼接图片-url"><a class="markdownIt-Anchor" href="#javascript-拼接图片-url">#</a> JavaScript 拼接图片 url</h5>
<p>用  <code>window.devicePixelRatio</code>  获取设备像素比，遍历所有图片，替换图片地址:</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">const</span> dpr <span class="token operator">=</span> window<span class="token punctuation">.</span>devicePixelRatio<span class="token punctuation">;</span>
<span class="token keyword">const</span> images <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
images<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">img</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  img<span class="token punctuation">.</span>src<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">@</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dpr<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">x.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="使用-svg"><a class="markdownIt-Anchor" href="#使用-svg">#</a> 使用 svg</h5>
<p><code>SVG</code>  的全称是可缩放矢量图。不同于位图的基于像素，  <code>SVG</code>  则是属于对图像的形状描述，所以它本质上是文本文件，体积较小，且不管放大多少倍都不会失真。<br>
除了我们手动在代码中绘制  <code>svg</code> ，我们还可以像使用位图一样使用  <code>svg</code>  图片：</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>conardLi.svg<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>data:image/svg+xml;base64,[data]<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
.avatar { background: url(conardLi.svg);}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h5 id="借鉴"><a class="markdownIt-Anchor" href="#借鉴">#</a> 借鉴</h5>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1526654">https://cloud.tencent.com/developer/article/1526654</a></p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Mrr-cxh</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://mrr-cxh.github.io/2022/06/28/yi-dong-duan-gua-pei-ni-xu-yao-zhi-dao-de/">https://mrr-cxh.github.io/2022/06/28/yi-dong-duan-gua-pei-ni-xu-yao-zhi-dao-de/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">Mrr-cxh</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/H5/">
                                    <span class="chip bg-color">H5</span>
                                </a>
                            
                                <a href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D/">
                                    <span class="chip bg-color">移动端适配</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2022/06/30/deeplink-shen-du-lian-jie/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/22.jpg" class="responsive-img" alt="DeepLink深度链接">
                        
                        <span class="card-title">DeepLink深度链接</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            先说一个日常场景帮大家理解下什么是深度链接（Deeplink）。最近双十一、双十二，不知道大家有没有被亲故们发的某宝、某东、或拼夕夕的各类信息轮番轰炸？此外，大家的亲友群、闺蜜群里常年有一类链接挂着小红薯的笔记分享、某宝的化妆品。深度链接（Deeplink）可能存在在以下几个场景下：1. 如果小伙伴 A 已经安装了该 App，那她只要点开链接就可以直接跳转到 App 内2. 如果小伙伴 A 没有安装相关 App，那就会跳转到应用市场指引下载 App 并安装。类型场景还有其他可能性：
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-06-30
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%AD%A6%E4%B9%A0/" class="post-category">
                                    学习
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/DeepLink/">
                        <span class="chip bg-color">DeepLink</span>
                    </a>
                    
                    <a href="/tags/H5/">
                        <span class="chip bg-color">H5</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2022/06/20/vue3/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/13.jpg" class="responsive-img" alt="Vue3">
                        
                        <span class="card-title">Vue3</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Vue 是一套用于构建用户界面的渐进式框架。与其它大型框架不同的是，Vue 被设计为可以自底向上逐层应用。Vue 的核心库只关注视图层，不仅易于上手，还便于与第三方库或既有项目整合。另一方面，当与现代化的工具链以及各种支持类库结合使用时，Vue 也完全能够为复杂的单页应用提供驱动。
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-06-20
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E6%A1%86%E6%9E%B6/" class="post-category">
                                    框架
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E6%A1%86%E6%9E%B6/">
                        <span class="chip bg-color">框架</span>
                    </a>
                    
                    <a href="/tags/Vue/">
                        <span class="chip bg-color">Vue</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2021-2023</span>
            
            <span id="year">2021</span>
            <a href="/about" target="_blank">Mrr-cxh</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
                &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                        class="white-color">184.3k</span>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/Mrr-cxh" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:1361091680@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1361091680" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1361091680" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
